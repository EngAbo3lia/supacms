---
description: 
globs: 
alwaysApply: false
---
# üß≠ Travel Advisor RAG Rules (rules.mdc)

## üìò Purpose
This system enables storing and retrieving travel advisor profiles in a way that supports:
- Chat-based retrieval using vector embeddings (RAG)
- UI filtering by destination, specialties, and more

---

## üì¶ documents Table Schema

```sql
CREATE TABLE documents (
  id BIGSERIAL PRIMARY KEY,
  title TEXT,
  content TEXT NOT NULL,
  embedding VECTOR, -- vector size depends on embedding model used
  travel_advisor_id UUID,
  metadata JSONB,
  destinations TEXT[],
  specialties TEXT[]
);



‚∏ª

üß¨ Data Processing Pipeline (via n8n)
	1.	Input JSON from scrape or import:
	‚Ä¢	Raw advisor record with fields like full_name, description, knows_about, interests, etc.
	2.	Build content field:
	‚Ä¢	This is the core text that will be vectorized.
	‚Ä¢	Constructed using an LLM or prompt like:

{{full_name}} is a travel advisor based in {{city}}, {{state}} with {{years_experience}}. 
They specialize in {{interests.join(', ')}} and work with suppliers like {{suppliers.join(', ')}}.
Known for helping clients plan trips to {{destinations.join(', ')}}, they offer a customized, non-cookie-cutter approach.


	3.	Store other fields:
	‚Ä¢	metadata: full original JSON or cleaned object with public fields
	‚Ä¢	destinations: e.g. ["Alaska", "Europe", "Hawaii"]
	‚Ä¢	specialties: e.g. ["Family Vacations", "Adventure", "Cruises"]

‚∏ª

ü§ñ Chat Search (RAG)
	‚Ä¢	Use embedding search against content to find relevant advisors for queries like:
‚ÄúLooking for someone who knows Alaska and does family-friendly cruises.‚Äù
	‚Ä¢	Once retrieved, use metadata to display image, profile link, and specialties.

‚∏ª

üîç UI Filtering
	‚Ä¢	Filter advisors using SQL like:

SELECT * FROM documents WHERE 'Alaska' = ANY(destinations);
SELECT * FROM documents WHERE 'Adventure' = ANY(specialties);


	‚Ä¢	For compound filters:

SELECT * FROM documents
WHERE 'Alaska' = ANY(destinations)
  AND 'Family Vacations' = ANY(specialties);



‚∏ª

üß© Integration Tips
	‚Ä¢	Add GIN indexes for fast filtering:

CREATE INDEX idx_destinations ON documents USING GIN (destinations);
CREATE INDEX idx_specialties ON documents USING GIN (specialties);


	‚Ä¢	For embedding vector column: match the model you use (e.g., OpenAI = 1536 floats)
	‚Ä¢	Frontend filters should mirror destinations and specialties tag options

‚∏ª

üóÇÔ∏è Example Advisor Content

Kelly Jo Rodriguez is a third-generation Alaskan travel advisor based in Anchorage. 
With over 25 years of experience, she specializes in tailor-made trips to Alaska, Europe, and beyond. 
Her focus is on adventure, family vacations, cruises, and wildlife experiences. 
She works with trusted suppliers like UnCruise Adventures and CIE Tours. 
Kelly is known for building custom trips based on each client‚Äôs needs ‚Äî never cookie-cutter.



‚∏ª

‚ú® Future Extensions
	‚Ä¢	Add languages_spoken, availability, or rating fields
	‚Ä¢	Join with a conversations table to track user interactions with advisors
	‚Ä¢	Add AI-generated summaries to metadata for instant card previews

